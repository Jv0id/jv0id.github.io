---
title: "shell中对字段或变量进行截取"
layout: post
date: 2019-09-30 16:39
headerImage: false
tag:
- shell
- 截取
category: blog
author: 夏潇熙
description: shell中对字段或变量进行截取
---

> 假设有变量 `var=http://www.aaa.com/123.htm`.

- 1 . # 号截取，删除左边字符，保留右边字符。

复制代码 代码如下:

`echo ${var#*//}`

其中 `var` 是变量名，# 号是运算符，*// 表示从左边开始删除第一个 // 号及左边的所有字符，即删除 http:// 

结果是 ：www.aaa.com/123.htm

- 2 . ## 号截取

复制代码 代码如下:

`echo ${var##*/}`

`##*/` 表示从右边开始删除第一个 / 号及左边的所有字符，即删除 http://www.aaa.com/ 

结果是 123.htm

- 3 . %号截取，删除右边字符，保留左边字符

复制代码 代码如下:

`echo ${var%/*}`

`%/* `表示从右边开始，删除第一个 / 号及右边的字符

结果是：http://www.aaa.com

- 4 . %% 号截取，删除右边字符，保留左边字符

复制代码 代码如下:

`echo ${var%%/*}`

`%%/*` 表示左边开始，删除第一个 / 号及右边的字符 

结果是：http:

- 5 . 从左边第几个字符开始，及字符的个数

复制代码 代码如下:

`echo ${var:0:5}`

其中的 0 表示左边第一个字符开始，5 表示字符的总个数。 

结果是：http:

- 6 . 从左边第几个字符开始，一直到结束。

复制代码 代码如下:

`echo ${var:7}`

其中的 7 表示左边第8个字符开始，一直到结束。 

结果是 ：www.aaa.com/123.htm

- 7 . 从右边第几个字符开始，及字符的个数 

复制代码 代码如下:

`echo ${var:0-7:3}`

其中的 0-7 表示右边算起第七个字符开始，3 表示字符的个数。 

结果是：123

- 8 . 从右边第几个字符开始，一直到结束。

复制代码 代码如下:

`echo ${var:0-7}`

表示从右边第七个字符开始，一直到结束。 

结果是：123.htm

注：左边的第一个字符是用 0 表示，右边的第一个字符用 0-1 表示

### shell 去掉字符串最后一个斜杠（如果最后一个字符是斜杠）
```bash
[root@localhost ~]# aaa=/home/zz
[root@localhost ~]# bbb=/home/zz/
[root@localhost ~]# echo ${aaa%*/}
/home/zz
[root@localhost ~]# echo ${bbb%*/}
/home/zz
```
